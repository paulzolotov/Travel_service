{% extends 'base.html' %}

{% load static %}
{% block content %}
<body>
    <div class="account">
        <div class="container">
            <div class="account__wrap">
                <div class="account__user">
                    <h3 class="account__title">{{ user.get_full_name }}</h3><br>
                    <p class="account__userinfo">Информация о пользователе</p>
                    <p class="account__userinfo">Username: {{ user.username }}</p>
                    <p class="account__userinfo">Моб. телефон: {{ user.phone }}</p>
                    <p class="account__userinfo">Дата рождения: {{ user.date_of_birth }}</p>
                    <p class="account__userinfo">Email: {{ user.email }}</p>
                    <p class="account__userinfo">Дата регистрации: {{ user.date_joined }}</p>
                    <a class="account__btn-remove" href="{% url 'users:user-info-edit' %}">Изменить</a>
                </div>
            {% if user_trips %}
                <div class="account__info">
                    <h3 class="account__title">Информация о поездках</h3>
                        <table class="account__table-wrap">
                            <tr class="account__table-item">
                                <th class="account__tabletop">Направление</th>
                                <th class="account__tabletop">Дата поездки</th>
                                <th class="account__tabletop">Время отправления</th>
                                <th class="account__tabletop">Время прибытия</th>
                                <th class="account__tabletop">Номер остановки</th>
                                <th class="account__tabletop">Места</th>
                                <th class="account__tabletop">Цена</th>
                            </tr>
                        {% for trip in user_trips %}
                            <tr class="account__table-item">
                                <td class="account__text">{{ trip.get_direction }}</td>
                                <td class="account__text">{{ trip.date_of_the_trip }}</td>
                                <td class="account__text">{{ trip.departure_time }}</td>
                                <td class="account__text">{{ trip.arrival_time_calculation }}</td>
                                <td class="account__text">{{ trip.landing_place }}</td>
                                <td class="account__text">{{ trip.number_of_reserved_places }}</td>
                                <td class="account__text">{{ trip.get_full_price }} BYN</td>
                            </tr>
                            <tr class="account__table-item">
                                <td class="account__text" colspan="6">Информация о перевозчике: {{ trip.car_info_in_trip.name }}, гос.номер {{ trip.car_info_in_trip.auto_number }}, {{ trip.car_info_in_trip.carrier_phone }}</td>
                                <td class="account__text" rowspan="2"><a class="account__btn-remove" href="{% url 'booking:trip_remove' trip.id %}">Отменить поездку</a><td>
                            </tr>
                            <tr class="account__table-item">
                                <td class="account__text" colspan="6">
                                    {% if trip.user_comment %}
                                        Комментарий: {{ trip.user_comment}}
                                    {% else %}
                                        Комментарий: &nbsp;
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </table>
                        {% else %}
                    <div class="account__info">
                        <h3 class="account__title">Информация о поездках</h3>
                            <h4 class="account__text-notrip">
                                У вас нет забронированных поездок
                            </h4>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

{% endblock  %}